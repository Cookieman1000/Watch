#include <Time.h>
#include <TimeLib.h>
#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

#define ACTIVATED LOW
#define OLED_RESET 4
#define TEXT_SIZE 4
Adafruit_SSD1306 display(OLED_RESET);
const int buttonPin = 2;
const int buttonPin2 = 3;
const int buttonPin3 = 4;
const int buttonPin4 = 5;
// Initialize DHT sensor for normal 16mhz Arduino
int buttonState = 0;
int isActivated = 0; 
void setup()
{
  Wire.begin();
  display.begin(SSD1306_SWITCHCAPVCC, 0x3C);// initialize with the I2C addr 0x3C (for the 128x32)(initializing the display)
  // initialize the pushbutton pin as an input:
  pinMode(buttonPin, INPUT);
  digitalWrite(buttonPin,HIGH);
  Serial.begin(9600);

  /*
   * Sams Notes: 
   *  - Have to make sure to set the current time each time you load the application. 
   *  - Possible ways to fix this could be wifi/bluetooth connection to a computer or something that has the correct time
  */
  setTime(1545432358UL);
  displayTempHumid();
  display.display();
}
void displayTempHumid(){
  delay(2000);

  display.clearDisplay();
  display.setTextColor(WHITE);
  display.setTextSize(1);
  display.setCursor(0,0);
  display.print("Hello World");
  display.setCursor(0,10);
  display.print("Hello World");
  display.setCursor(0,20);
  display.print("Hello World");

}
/*
 * This function displays the current hour and minute time on the watches face.
 * See above comment to see how it works
 * 
 */
void timeDisplay(){
  display.clearDisplay();
  display.setTextColor(WHITE);
  display.setTextSize(TEXT_SIZE);
  time_t t = now();
  display.setCursor(0,0);
  display.print(hour(t));
  display.setCursor(45,0);
  display.print(":");
  display.setCursor(70,0);
  display.print(minute(t)); 
}



void loop()
{
  //Read in Pin 1
  buttonState = digitalRead(buttonPin);

  //Check to see if the the button was pressed
  if(buttonState == ACTIVATED) {
     //Check to see if we are on the time display or not
     if(isActivated == 0){
       timeDisplay();
       isActivated = 1; 
     }else{
        displayTempHumid();
        isActivated = 0; 
     }
  }
  display.display();
}
